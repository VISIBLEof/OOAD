(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89573,e=>{"use strict";var t=e.i(48355),s=e.i(98829),a=e.i(15081),i=e.i(51574),r=e.i(76416);function n(){let e,n=(0,a.useRouter)(),l=(0,a.useParams)(),[c,o]=(0,s.useState)(null),[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)([]),[x,p]=(0,s.useState)([]),[j,f]=(0,s.useState)(0),[b,g]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[S,z]=(0,s.useState)(!1),[q,v]=(0,s.useState)(0);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch(`/api/quizzes?quizId=${l.id}`);if(e.ok){let t=await e.json();if(t.data.length>0){let e=t.data[0];o(e),h(JSON.parse(e.questions||"[]")),p(Array(JSON.parse(e.questions||"[]").length).fill(null))}}}catch(e){console.error("Error loading quiz:",e)}})()},[l.id]);let C=async()=>{try{let e=await fetch(`/api/quizzes/${l.id}/start`,{method:"POST"});if(e.ok){let t=await e.json();u(t.data.attemptId),f(60*t.data.timeLimitMinutes),g(!0)}}catch(e){console.error("Error starting quiz:",e)}};(0,s.useEffect)(()=>{if(!b||j<=0)return;let e=setInterval(()=>{f(e=>e<=1?(k(),0):e-1)},1e3);return()=>clearInterval(e)},[b,j]);let k=async()=>{N(!0);try{let e=await fetch(`/api/quizzes/${l.id}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attemptId:d,answers:x})});if(e.ok){let t=await e.json();v(t.data.score),z(!0)}}catch(e){console.error("Error submitting quiz:",e)}finally{N(!1)}};return c?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsx)(i.Button,{variant:"ghost",onClick:()=>n.back(),children:"â† Back"})})}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-8 max-w-2xl",children:(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:c.title}),(0,t.jsxs)(r.CardDescription,{children:[c.time_limit_minutes," minute quiz"]})]}),(0,t.jsx)(r.CardContent,{className:"space-y-6",children:b?S?(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold",children:["Score: ",q,"%"]}),(0,t.jsx)(i.Button,{onClick:()=>n.back(),children:"Back to Dashboard"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 bg-muted rounded",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Time Remaining:"}),(0,t.jsx)("span",{className:"text-2xl font-mono text-primary",children:(e=Math.floor(j/60),`${e}:${(j%60).toString().padStart(2,"0")}`)})]}),(0,t.jsx)("div",{className:"space-y-6",children:m.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 border rounded",children:[(0,t.jsxs)("p",{className:"font-semibold mb-4",children:[s+1,". ",e.question]}),"single"===e.type&&e.options&&(0,t.jsx)("div",{className:"space-y-2",children:e.options.map((e,a)=>(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:`question-${s}`,checked:x[s]===a,onChange:()=>{let e=[...x];e[s]=a,p(e)}}),e]},a))})]},e.id))}),(0,t.jsx)(i.Button,{onClick:k,disabled:y,className:"w-full",size:"lg",children:y?"Submitting...":"Submit Quiz"})]}):(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsxs)("p",{className:"text-muted-foreground",children:["This quiz has ",m.length," questions."]}),(0,t.jsx)(i.Button,{onClick:C,size:"lg",children:"Start Quiz"})]})})]})})]}):(0,t.jsx)("div",{className:"p-4",children:"Loading..."})}e.s(["default",()=>n])}]);