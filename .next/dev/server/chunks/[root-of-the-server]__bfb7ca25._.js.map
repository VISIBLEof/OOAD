{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Voltex/Downloads/OOAD%20Project/OOAD%20Project/lib/auth.ts"],"sourcesContent":["import { jwtVerify, SignJWT } from 'jose';\nimport { cookies } from 'next/headers';\n\nconst JWT_SECRET = new TextEncoder().encode(process.env.JWT_SECRET || 'your-secret-key-change-in-production');\n\nexport async function createToken(userId: string, email: string, role: string) {\n  const token = await new SignJWT({ userId, email, role })\n    .setProtectedHeader({ alg: 'HS256' })\n    .setExpirationTime('7d')\n    .sign(JWT_SECRET);\n  \n  return token;\n}\n\nexport async function verifyToken(token: string) {\n  try {\n    const verified = await jwtVerify(token, JWT_SECRET);\n    return verified.payload as { userId: string; email: string; role: string };\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function setAuthCookie(token: string) {\n  const cookieStore = await cookies();\n  cookieStore.set('auth-token', token, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 7 * 24 * 60 * 60,\n  });\n}\n\nexport async function getAuthToken() {\n  try {\n    const cookieStore = await cookies();\n    const token = cookieStore.get('auth-token')?.value;\n    console.log('getAuthToken - found token:', token ? 'yes' : 'no');\n    return token;\n  } catch (err) {\n    console.log('getAuthToken - cookies() error:', err);\n    return null;\n  }\n}\n\nexport async function getCurrentUser() {\n  try {\n    const token = await getAuthToken();\n    console.log('getCurrentUser - token from cookie:', token ? 'yes' : 'no');\n    if (!token) return null;\n    const verified = await verifyToken(token);\n    console.log('getCurrentUser - verified:', verified ? 'yes' : 'no');\n    return verified;\n  } catch (err) {\n    console.log('getCurrentUser - error:', err);\n    return null;\n  }\n}\n\nexport async function clearAuthCookie() {\n  const cookieStore = await cookies();\n  cookieStore.delete('auth-token');\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AACA;;;AAEA,MAAM,aAAa,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,UAAU,IAAI;AAE/D,eAAe,YAAY,MAAc,EAAE,KAAa,EAAE,IAAY;IAC3E,MAAM,QAAQ,MAAM,IAAI,mLAAO,CAAC;QAAE;QAAQ;QAAO;IAAK,GACnD,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,iBAAiB,CAAC,MAClB,IAAI,CAAC;IAER,OAAO;AACT;AAEO,eAAe,YAAY,KAAa;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,uLAAS,EAAC,OAAO;QACxC,OAAO,SAAS,OAAO;IACzB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,eAAe,cAAc,KAAa;IAC/C,MAAM,cAAc,MAAM,IAAA,6JAAO;IACjC,YAAY,GAAG,CAAC,cAAc,OAAO;QACnC,UAAU;QACV,QAAQ,oDAAyB;QACjC,UAAU;QACV,QAAQ,IAAI,KAAK,KAAK;IACxB;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,MAAM,IAAA,6JAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe;QAC7C,QAAQ,GAAG,CAAC,+BAA+B,QAAQ,QAAQ;QAC3D,OAAO;IACT,EAAE,OAAO,KAAK;QACZ,QAAQ,GAAG,CAAC,mCAAmC;QAC/C,OAAO;IACT;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,QAAQ,MAAM;QACpB,QAAQ,GAAG,CAAC,uCAAuC,QAAQ,QAAQ;QACnE,IAAI,CAAC,OAAO,OAAO;QACnB,MAAM,WAAW,MAAM,YAAY;QACnC,QAAQ,GAAG,CAAC,8BAA8B,WAAW,QAAQ;QAC7D,OAAO;IACT,EAAE,OAAO,KAAK;QACZ,QAAQ,GAAG,CAAC,2BAA2B;QACvC,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,6JAAO;IACjC,YAAY,MAAM,CAAC;AACrB"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Voltex/Downloads/OOAD%20Project/OOAD%20Project/lib/storage.ts"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst DATA_DIR = path.join(process.cwd(), '.data');\r\nconst COURSES_FILE = path.join(DATA_DIR, 'courses.json');\r\nconst QUIZZES_FILE = path.join(DATA_DIR, 'quizzes.json');\r\nconst ASSIGNMENTS_FILE = path.join(DATA_DIR, 'assignments.json');\r\nconst ATTEMPTS_FILE = path.join(DATA_DIR, 'attempts.json');\r\n\r\n// Ensure data directory exists\r\nfunction ensureDataDir() {\r\n  if (!fs.existsSync(DATA_DIR)) {\r\n    fs.mkdirSync(DATA_DIR, { recursive: true });\r\n  }\r\n}\r\n\r\n// Load data from file or return empty array\r\nfunction loadFromFile(filePath: string): any[] {\r\n  try {\r\n    ensureDataDir();\r\n    if (fs.existsSync(filePath)) {\r\n      const data = fs.readFileSync(filePath, 'utf-8');\r\n      return JSON.parse(data);\r\n    }\r\n  } catch (error) {\r\n    console.error(`Error loading ${filePath}:`, error);\r\n  }\r\n  return [];\r\n}\r\n\r\n// Save data to file\r\nfunction saveToFile(filePath: string, data: any) {\r\n  try {\r\n    ensureDataDir();\r\n    fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf-8');\r\n  } catch (error) {\r\n    console.error(`Error saving to ${filePath}:`, error);\r\n  }\r\n}\r\n\r\n// Courses\r\nexport const coursesStore: Map<string, any> = new Map();\r\nfunction loadCourses() {\r\n  const data = loadFromFile(COURSES_FILE);\r\n  data.forEach((course: any) => coursesStore.set(course.id, course));\r\n}\r\nexport function saveCourses() {\r\n  const data = Array.from(coursesStore.values());\r\n  saveToFile(COURSES_FILE, data);\r\n}\r\n\r\n// Quizzes\r\nexport const quizzesStore: Map<string, any> = new Map();\r\nfunction loadQuizzes() {\r\n  const data = loadFromFile(QUIZZES_FILE);\r\n  data.forEach((quiz: any) => quizzesStore.set(quiz.id, quiz));\r\n}\r\nexport function saveQuizzes() {\r\n  const data = Array.from(quizzesStore.values());\r\n  saveToFile(QUIZZES_FILE, data);\r\n}\r\n\r\n// Assignments\r\nexport const assignmentsStore: Map<string, any> = new Map();\r\nfunction loadAssignments() {\r\n  const data = loadFromFile(ASSIGNMENTS_FILE);\r\n  data.forEach((assignment: any) => assignmentsStore.set(assignment.id, assignment));\r\n}\r\nexport function saveAssignments() {\r\n  const data = Array.from(assignmentsStore.values());\r\n  saveToFile(ASSIGNMENTS_FILE, data);\r\n}\r\n\r\n// Quiz Attempts\r\nexport const quizAttemptsStore: Map<string, any> = new Map();\r\nfunction loadAttempts() {\r\n  const data = loadFromFile(ATTEMPTS_FILE);\r\n  data.forEach((attempt: any) => quizAttemptsStore.set(attempt.id, attempt));\r\n}\r\nexport function saveAttempts() {\r\n  const data = Array.from(quizAttemptsStore.values());\r\n  saveToFile(ATTEMPTS_FILE, data);\r\n}\r\n\r\n// ID counters\r\nexport let courseIdCounter = 1;\r\nexport let quizIdCounter = 1;\r\nexport let assignmentIdCounter = 1;\r\nexport let quizAttemptIdCounter = 1;\r\n\r\n// Track if storage has been initialized\r\nlet isInitialized = false;\r\n\r\n// Initialize all data on startup\r\nexport function initializeStorage() {\r\n  if (isInitialized) return; // Skip if already initialized\r\n  isInitialized = true;\r\n  \r\n  loadCourses();\r\n  loadQuizzes();\r\n  loadAssignments();\r\n  loadAttempts();\r\n  \r\n  // Set counters based on existing data\r\n  if (coursesStore.size > 0) {\r\n    courseIdCounter = Math.max(...Array.from(coursesStore.values()).map((c: any) => {\r\n      const match = c.id.match(/course_(\\d+)/);\r\n      return match ? parseInt(match[1]) : 0;\r\n    })) + 1;\r\n  }\r\n  \r\n  if (quizzesStore.size > 0) {\r\n    quizIdCounter = Math.max(...Array.from(quizzesStore.values()).map((q: any) => {\r\n      const match = q.id.match(/quiz_(\\d+)/);\r\n      return match ? parseInt(match[1]) : 0;\r\n    })) + 1;\r\n  }\r\n  \r\n  if (assignmentsStore.size > 0) {\r\n    assignmentIdCounter = Math.max(...Array.from(assignmentsStore.values()).map((a: any) => {\r\n      const match = a.id.match(/assignment_(\\d+)/);\r\n      return match ? parseInt(match[1]) : 0;\r\n    })) + 1;\r\n  }\r\n  \r\n  if (quizAttemptsStore.size > 0) {\r\n    quizAttemptIdCounter = Math.max(...Array.from(quizAttemptsStore.values()).map((a: any) => {\r\n      const match = a.id.match(/attempt_(\\d+)/);\r\n      return match ? parseInt(match[1]) : 0;\r\n    })) + 1;\r\n  }\r\n  \r\n  console.log('Storage initialized');\r\n}\r\n\r\nexport function incrementCourseId() {\r\n  const id = courseIdCounter++;\r\n  saveCourses();\r\n  return id;\r\n}\r\n\r\nexport function incrementQuizId() {\r\n  const id = quizIdCounter++;\r\n  saveQuizzes();\r\n  return id;\r\n}\r\n\r\nexport function incrementAssignmentId() {\r\n  const id = assignmentIdCounter++;\r\n  saveAssignments();\r\n  return id;\r\n}\r\n\r\nexport function incrementQuizAttemptId() {\r\n  const id = quizAttemptIdCounter++;\r\n  saveAttempts();\r\n  return id;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Voltex/Downloads/OOAD%20Project/OOAD%20Project/app/api/quizzes/submissions/route.ts"],"sourcesContent":["import { getCurrentUser } from '@/lib/auth';\r\nimport { sql } from '@vercel/postgres';\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { quizzesStore, quizAttemptsStore, initializeStorage } from '@/lib/storage';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\ninitializeStorage();\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);\r\n\r\nasync function getUserEmail(userId: string): Promise<string | null> {\r\n  try {\r\n    const { data: { user }, error } = await supabase.auth.admin.getUserById(userId);\r\n    if (error || !user) return null;\r\n    return user.email || null;\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const user = await getCurrentUser();\r\n\r\n    if (!user) {\r\n      return NextResponse.json({ success: false, error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    const searchParams = request.nextUrl.searchParams;\r\n    const quizId = searchParams.get('quizId');\r\n\r\n    if (!quizId) {\r\n      return NextResponse.json({ success: false, error: 'Quiz ID required' }, { status: 400 });\r\n    }\r\n\r\n    // Get quiz to verify teacher owns it (from memory or database)\r\n    let quiz = quizzesStore.get(quizId);\r\n    \r\n    if (!quiz) {\r\n      try {\r\n        const quizResult = await sql`\r\n          SELECT id, course_id FROM quizzes WHERE id = ${quizId}\r\n        `;\r\n        if (quizResult.rows.length > 0) {\r\n          quiz = quizResult.rows[0];\r\n        }\r\n      } catch {\r\n        // Database not available\r\n      }\r\n    }\r\n\r\n    if (!quiz) {\r\n      return NextResponse.json({ success: false, error: 'Quiz not found' }, { status: 404 });\r\n    }\r\n\r\n    // Get all attempts for this quiz from memory\r\n    let attempts = Array.from(quizAttemptsStore.values()).filter(\r\n      (attempt) => attempt.quiz_id === quizId && attempt.finished_at\r\n    );\r\n\r\n    // If user is a student, only return their submission\r\n    if (user.role === 'student') {\r\n      attempts = attempts.filter((attempt) => attempt.student_email === user.email);\r\n    }\r\n\r\n    // Try to get from database as well\r\n    let dbAttempts: any[] = [];\r\n    try {\r\n      const dbResult = await sql`\r\n        SELECT id, quiz_id, student_id, answers, score, started_at, finished_at \r\n        FROM quiz_attempts \r\n        WHERE quiz_id = ${quizId} AND finished_at IS NOT NULL\r\n      `;\r\n      dbAttempts = dbResult.rows;\r\n      \r\n      // If student, filter by their ID\r\n      if (user.role === 'student') {\r\n        dbAttempts = dbAttempts.filter((attempt) => attempt.student_id === user.userId);\r\n      }\r\n    } catch {\r\n      // Database not available\r\n    }\r\n\r\n    // Combine and deduplicate\r\n    const allAttempts = [...attempts];\r\n    for (const dbAttempt of dbAttempts) {\r\n      if (!allAttempts.find((a) => a.id === dbAttempt.id)) {\r\n        allAttempts.push(dbAttempt);\r\n      }\r\n    }\r\n\r\n    // Fetch emails for attempts that don't have them\r\n    const attemptsWithEmails = await Promise.all(\r\n      allAttempts.map(async (attempt) => {\r\n        if (attempt.student_email) {\r\n          return attempt;\r\n        }\r\n        const email = await getUserEmail(attempt.student_id);\r\n        return {\r\n          ...attempt,\r\n          student_email: email,\r\n        };\r\n      })\r\n    );\r\n\r\n    return NextResponse.json({ success: true, data: attemptsWithEmails }, { status: 200 });\r\n  } catch (error: any) {\r\n    console.error('Get submissions error:', error);\r\n    return NextResponse.json({ success: false, error: 'Failed to fetch submissions' }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}