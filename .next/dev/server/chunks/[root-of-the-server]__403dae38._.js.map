{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Voltex/Downloads/OOAD%20Project/OOAD%20Project/lib/db.ts"],"sourcesContent":["import { createClient, SupabaseClient } from '@supabase/supabase-js';\n\nconst SUPABASE_URL = process.env.SUPABASE_URL;\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_KEY;\n\nif (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {\n  // Do not throw here to allow the app to run in environments where DB isn't configured yet,\n  // but many routes will fail until env is provided.\n  console.warn('SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY is not set. Supabase client will not be initialized.');\n}\n\nexport const supabaseAdmin: SupabaseClient | null =\n  SUPABASE_URL && SUPABASE_SERVICE_ROLE_KEY\n    ? createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, { auth: { persistSession: false } })\n    : null;\n\nexport async function getUserByEmail(email: string) {\n  if (!supabaseAdmin) throw new Error('Supabase client not initialized');\n  const { data, error } = await supabaseAdmin.from('users').select('id, email, password_hash, name, role').eq('email', email).limit(1).maybeSingle();\n  if (error) throw error;\n  return data as any | null;\n}\n\nexport async function createUser({ name, email, passwordHash, role = 'student' }: { name: string; email: string; passwordHash: string; role?: string; }) {\n  if (!supabaseAdmin) throw new Error('Supabase client not initialized');\n  const { data, error } = await supabaseAdmin.from('users').insert({ name, email, password_hash: passwordHash, role }).select('id, email, role').maybeSingle();\n  if (error) throw error;\n  return data;\n}\n\nexport async function getUserById(id: string) {\n  if (!supabaseAdmin) throw new Error('Supabase client not initialized');\n  const { data, error } = await supabaseAdmin.from('users').select('id, name, email, role').eq('id', id).limit(1).maybeSingle();\n  if (error) throw error;\n  return data;\n}\n\n// Optional: small helper to run raw SQL if needed via RPC or other means. For now we rely on standard CRUD methods.\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,YAAY;AAC7C,MAAM,4BAA4B,QAAQ,GAAG,CAAC,yBAAyB,IAAI,QAAQ,GAAG,CAAC,YAAY;AAEnG,IAAI,CAAC,gBAAgB,CAAC,2BAA2B;IAC/C,2FAA2F;IAC3F,mDAAmD;IACnD,QAAQ,IAAI,CAAC;AACf;AAEO,MAAM,gBACX,gBAAgB,4BACZ,IAAA,0NAAY,EAAC,cAAc,2BAA2B;IAAE,MAAM;QAAE,gBAAgB;IAAM;AAAE,KACxF;AAEC,eAAe,eAAe,KAAa;IAChD,IAAI,CAAC,eAAe,MAAM,IAAI,MAAM;IACpC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,cAAc,IAAI,CAAC,SAAS,MAAM,CAAC,wCAAwC,EAAE,CAAC,SAAS,OAAO,KAAK,CAAC,GAAG,WAAW;IAChJ,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,WAAW,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,OAAO,SAAS,EAAyE;IACrJ,IAAI,CAAC,eAAe,MAAM,IAAI,MAAM;IACpC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,cAAc,IAAI,CAAC,SAAS,MAAM,CAAC;QAAE;QAAM;QAAO,eAAe;QAAc;IAAK,GAAG,MAAM,CAAC,mBAAmB,WAAW;IAC1J,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,YAAY,EAAU;IAC1C,IAAI,CAAC,eAAe,MAAM,IAAI,MAAM;IACpC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,cAAc,IAAI,CAAC,SAAS,MAAM,CAAC,yBAAyB,EAAE,CAAC,MAAM,IAAI,KAAK,CAAC,GAAG,WAAW;IAC3H,IAAI,OAAO,MAAM;IACjB,OAAO;AACT,EAEA,oHAAoH"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Voltex/Downloads/OOAD%20Project/OOAD%20Project/app/api/auth/debug/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { supabaseAdmin } from '@/lib/db';\r\n\r\nexport async function GET() {\r\n  try {\r\n    return NextResponse.json({\r\n      ok: true,\r\n      supabaseAdminInitialized: !!supabaseAdmin,\r\n      hasServiceRoleKey: !!process.env.SUPABASE_SERVICE_ROLE_KEY,\r\n      hasSupabaseKey: !!process.env.SUPABASE_KEY,\r\n      hasNextPublicUrl: !!process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n      hasNextPublicAnon: !!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\r\n    });\r\n  } catch (err: any) {\r\n    return NextResponse.json({ ok: false, error: err?.message || String(err) }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,OAAO,iKAAY,CAAC,IAAI,CAAC;YACvB,IAAI;YACJ,0BAA0B,CAAC,CAAC,6IAAa;YACzC,mBAAmB,CAAC,CAAC,QAAQ,GAAG,CAAC,yBAAyB;YAC1D,gBAAgB,CAAC,CAAC,QAAQ,GAAG,CAAC,YAAY;YAC1C,kBAAkB,CAAC;YACnB,mBAAmB,CAAC;QACtB;IACF,EAAE,OAAO,KAAU;QACjB,OAAO,iKAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO,KAAK,WAAW,OAAO;QAAK,GAAG;YAAE,QAAQ;QAAI;IAC5F;AACF"}}]
}