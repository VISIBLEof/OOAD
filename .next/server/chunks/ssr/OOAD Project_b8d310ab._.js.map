{"version":3,"sources":["../../../../../OOAD%20Project/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../OOAD%20Project/app/student/quiz/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\ninterface Question {\n  id: string;\n  type: 'single' | 'multi' | 'text';\n  question: string;\n  options?: string[];\n}\n\nexport default function QuizPage() {\n  const router = useRouter();\n  const params = useParams();\n  const [quiz, setQuiz] = useState<any>(null);\n  const [attemptId, setAttemptId] = useState('');\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [answers, setAnswers] = useState<any[]>([]);\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [isStarted, setIsStarted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [score, setScore] = useState(0);\n\n  useEffect(() => {\n    const loadQuiz = async () => {\n      try {\n        const response = await fetch(`/api/quizzes?quizId=${params.id}`);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.data.length > 0) {\n            const q = data.data[0];\n            setQuiz(q);\n            setQuestions(JSON.parse(q.questions || '[]'));\n            setAnswers(new Array(JSON.parse(q.questions || '[]').length).fill(null));\n          }\n        }\n      } catch (error) {\n        console.error('Error loading quiz:', error);\n      }\n    };\n\n    loadQuiz();\n  }, [params.id]);\n\n  const handleStartQuiz = async () => {\n    try {\n      const response = await fetch(`/api/quizzes/${params.id}/start`, {\n        method: 'POST',\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setAttemptId(data.data.attemptId);\n        setTimeLeft(data.data.timeLimitMinutes * 60);\n        setIsStarted(true);\n      }\n    } catch (error) {\n      console.error('Error starting quiz:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (!isStarted || timeLeft <= 0) return;\n\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          handleSubmitQuiz();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [isStarted, timeLeft]);\n\n  const handleSubmitQuiz = async () => {\n    setIsSubmitting(true);\n\n    try {\n      const response = await fetch(`/api/quizzes/${params.id}/submit`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ attemptId, answers }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setScore(data.data.score);\n        setSubmitted(true);\n      }\n    } catch (error) {\n      console.error('Error submitting quiz:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (!quiz) return <div className=\"p-4\">Loading...</div>;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <Button variant=\"ghost\" onClick={() => router.back()}>\n            ‚Üê Back\n          </Button>\n        </div>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-8 max-w-2xl\">\n        <Card>\n          <CardHeader>\n            <CardTitle>{quiz.title}</CardTitle>\n            <CardDescription>\n              {quiz.time_limit_minutes} minute quiz\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {!isStarted ? (\n              <div className=\"text-center space-y-4\">\n                <p className=\"text-muted-foreground\">\n                  This quiz has {questions.length} questions.\n                </p>\n                <Button onClick={handleStartQuiz} size=\"lg\">\n                  Start Quiz\n                </Button>\n              </div>\n            ) : submitted ? (\n              <div className=\"text-center space-y-4\">\n                <p className=\"text-2xl font-bold\">Score: {score}%</p>\n                <Button onClick={() => router.back()}>\n                  Back to Dashboard\n                </Button>\n              </div>\n            ) : (\n              <>\n                <div className=\"flex justify-between items-center p-4 bg-muted rounded\">\n                  <span className=\"font-semibold\">Time Remaining:</span>\n                  <span className=\"text-2xl font-mono text-primary\">\n                    {formatTime(timeLeft)}\n                  </span>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {questions.map((question, index) => (\n                    <div key={question.id} className=\"p-4 border rounded\">\n                      <p className=\"font-semibold mb-4\">\n                        {index + 1}. {question.question}\n                      </p>\n\n                      {question.type === 'single' && question.options && (\n                        <div className=\"space-y-2\">\n                          {question.options.map((option, optIndex) => (\n                            <label key={optIndex} className=\"flex items-center gap-2\">\n                              <input\n                                type=\"radio\"\n                                name={`question-${index}`}\n                                checked={answers[index] === optIndex}\n                                onChange={() => {\n                                  const newAnswers = [...answers];\n                                  newAnswers[index] = optIndex;\n                                  setAnswers(newAnswers);\n                                }}\n                              />\n                              {option}\n                            </label>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n\n                <Button\n                  onClick={handleSubmitQuiz}\n                  disabled={isSubmitting}\n                  className=\"w-full\"\n                  size=\"lg\"\n                >\n                  {isSubmitting ? 'Submitting...' : 'Submit Quiz'}\n                </Button>\n              </>\n            )}\n          </CardContent>\n        </Card>\n      </main>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","ReactJsxRuntime"],"mappings":"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","ignoreList":[0]}